-- Bảng tạo để test phân quyền trên bảng muốn test thì mở comment để test
-- CONNECT C##QLTDH/admin123@localhost:1521/QUANLYTRUONGDAIHOC; -- Muốn tạo bằng C##QLTDH thì chạy nguyên cụm từ đây xuống còn sysdba thì bỏ dòng này
--BEGIN
--   -- Xóa bảng NHANVIEN nếu tồn tại
--   BEGIN
--      EXECUTE IMMEDIATE 'DROP TABLE NHANVIEN CASCADE CONSTRAINTS';
--   EXCEPTION
--      WHEN OTHERS THEN
--         IF SQLCODE != -942 THEN  -- Lỗi khác ngoài ORA-00942 (bảng không tồn tại)
--            RAISE;
--         END IF;
--   END;
--
--   -- Xóa bảng SINHVIEN nếu tồn tại
--   BEGIN
--      EXECUTE IMMEDIATE 'DROP TABLE SINHVIEN CASCADE CONSTRAINTS';
--   EXCEPTION
--      WHEN OTHERS THEN
--         IF SQLCODE != -942 THEN
--            RAISE;
--         END IF;
--   END;
--
--   -- Xóa bảng DONVI nếu tồn tại
--   BEGIN
--      EXECUTE IMMEDIATE 'DROP TABLE DONVI CASCADE CONSTRAINTS';
--   EXCEPTION
--      WHEN OTHERS THEN
--         IF SQLCODE != -942 THEN
--            RAISE;
--         END IF;
--   END;
--
--   -- Xóa bảng HOCPHAN nếu tồn tại
--   BEGIN
--      EXECUTE IMMEDIATE 'DROP TABLE HOCPHAN CASCADE CONSTRAINTS';
--   EXCEPTION
--      WHEN OTHERS THEN
--         IF SQLCODE != -942 THEN
--            RAISE;
--         END IF;
--   END;
--
--   -- Xóa bảng MOMON nếu tồn tại
--   BEGIN
--      EXECUTE IMMEDIATE 'DROP TABLE MOMON CASCADE CONSTRAINTS';
--   EXCEPTION
--      WHEN OTHERS THEN
--         IF SQLCODE != -942 THEN
--            RAISE;
--         END IF;
--   END;
--
--   -- Xóa bảng DANGKY nếu tồn tại
--   BEGIN
--      EXECUTE IMMEDIATE 'DROP TABLE DANGKY CASCADE CONSTRAINTS';
--   EXCEPTION
--      WHEN OTHERS THEN
--         IF SQLCODE != -942 THEN
--            RAISE;
--         END IF;
--   END;
--
--END;
--/
--CREATE TABLE QLDT_GIAOVIEN
--(
--    MAGV CHAR(5), 
--    HOTEN NVARCHAR2(50),
--    NGAYSINH DATE,
--    MAPHONG INT,
--    MATKHAU VARCHAR2(20),
--    LUONG NUMBER,
--    
--    PRIMARY KEY(MAGV)
--);
--CREATE TABLE QLDT_PHONGBAN
--(
--    MAPHONG INT, 
--    TENPHONG NVARCHAR2(100),
--    TRUONGPHONG CHAR(5),
--    CHINHANH VARCHAR(20),
--    
--    PRIMARY KEY (MAPHONG)
--);
--CREATE TABLE QLDT_DETAI
--(
--    MADT CHAR(4),
--    TENDT NVARCHAR2(100),
--    CAPQL NVARCHAR2(50),
--    NGAYDB DATE,
--    NGAYKT DATE,
--    GVCNDT CHAR(5),
--    PHONGQL INT,
--    PRIMARY KEY(MADT)
--);
--CREATE TABLE QLDT_THAMGIA
--(
--    MADT CHAR(4),
--    MAGV CHAR(5),
--    VAITRO NVARCHAR2(50),
--    THOIGIAN INT,
--    PHUCAP DECIMAL(3,1),
--    TINHTRANG NVARCHAR2(50),
--    PRIMARY KEY(MADT, MAGV)
--);
-----RELATIONSHIPS
--ALTER TABLE QLDT_GIAOVIEN
--ADD
--    CONSTRAINT FK_GV_PB
--    FOREIGN KEY (MAPHONG)
--    REFERENCES QLDT_PHONGBAN;
--ALTER TABLE QLDT_PHONGBAN
--ADD
--    CONSTRAINT FK_PB_GV
--    FOREIGN KEY (TRUONGPHONG)
--    REFERENCES QLDT_GIAOVIEN;
--ALTER TABLE QLDT_DETAI
--ADD
--    CONSTRAINT FK_DT_GV
--    FOREIGN KEY (GVCNDT)
--    REFERENCES QLDT_GIAOVIEN;
--ALTER TABLE QLDT_DETAI
--ADD
--    CONSTRAINT FK_DT_PB
--    FOREIGN KEY (PHONGQL)
--    REFERENCES QLDT_PHONGBAN;
--ALTER TABLE QLDT_THAMGIA
--ADD
--    CONSTRAINT FK_TG_DT
--    FOREIGN KEY (MADT)
--    REFERENCES QLDT_DETAI;
--ALTER TABLE QLDT_THAMGIA
--ADD
--    CONSTRAINT FK_TG_GV
--    FOREIGN KEY (MAGV)
--    REFERENCES QLDT_GIAOVIEN;


